<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
    <head th:replace="~{layout/plantilla :: head}">
        <title>Concesionario</title>
    </head>
    <body>

        <!-- 1 Sección principal para mostrar la informaccion de la entidad marcas -->
        <section th:fragment="listadoAutos" id="autos">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                        <div class="card">
                            <div class="card-header">
                                <h4>Información del auto</h4>
                            </div>
                            <!--div th:if="${autos != null and !autos.empty}"-->
                            <div th:if="${auto != null}">
                                <table class="table table-striped table-hover">
                                    <thead class="table-dark">
                                        <tr><th>#</th>
                                            <th>Marca</th>
                                            <th>Modelo</th>
                                            <th>Estilo</th>
                                            <th>Combustible</th>
                                            <th>Transmision</th>
                                            <th>Provincia</th>
                                            <th>Año</th>
                                            <th>Precio</th>
                                            <th>Imagen</th>
                                            <th></th></tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="auto, contador : ${autos}">
                                            <td>[[${contador.count}]]</td>
                                            <td>[[${auto.marca}]]</td>
                                            <td>[[${auto.modelo}]]</td>
                                            <td>[[${auto.estilo}]]</td>
                                            <td>[[${auto.combustible}]]</td>
                                            <td>[[${auto.transmision}]]</td>
                                            <td>[[${auto.provincia}]]</td>
                                            <td>[[${auto.ano}]]</td>
                                            <td>[[${auto.precio}]]</td>
                                            <td>
                                                <img th:src="@{${auto.rutaImagen}}" alt="Imagen del auto" width="100" th:if="${auto.rutaImagen != null}">
                                            </td>                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--div class="text-center p-2" th:if="${autos == null or autos.empty}"-->
                            <div class="text-center p-2" th:if="${autos == null}">
                                <span>No se encontraron autos con los criterios seleccionados</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 1 Sección principal para mostrar la informaccion de la entidad marcas -->
        <section th:fragment="listadoTotalAutos" id="autos">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                        <div class="card">
                            <div class="card-header">
                                <h4>Información del auto</h4>
                            </div>
                            <div th:if="${autos != null and !autos.empty}">
                                <!--div th:if="${auto != null}"-->
                                <table class="table table-striped table-hover">
                                    <thead class="table-dark">
                                        <tr><th>#</th>
                                            <th>Marca</th>
                                            <th>Modelo</th>
                                            <th>Estilo</th>
                                            <th>Combustible</th>
                                            <th>Transmision</th>
                                            <th>Provincia</th>
                                            <th>Año</th>
                                            <th>Precio</th>
                                            <th>Imagen</th>
                                            <th></th></tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="auto, contador : ${autos}">
                                            <td>[[${contador.count}]]</td>
                                            <td>[[${auto.marca}]]</td>
                                            <td>[[${auto.modelo}]]</td>
                                            <td>[[${auto.estilo}]]</td>
                                            <td>[[${auto.combustible}]]</td>
                                            <td>[[${auto.transmision}]]</td>
                                            <td>[[${auto.provincia}]]</td>
                                            <td>[[${auto.ano}]]</td>
                                            <td>[[${auto.precio}]]</td>
                                            <td>
                                                <img th:src="@{${auto.rutaImagen}}" alt="Imagen del auto" width="100" th:if="${auto.rutaImagen != null}">
                                            </td>                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--div class="text-center p-2" th:if="${autos == null or autos.empty}"-->
                            <div class="text-center p-2" th:if="${autos == null}">
                                <span>No se encontraron autos con los criterios seleccionados</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fragmento para registro y búsqueda de autos -->
        <section th:fragment="formularioBusqueda" id="autos">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">
                        <div class="card"><br>
                                <div class="card-header">
                                    <h4>Información del auto</h4>
                                </div>
                                <form action="#" th:action="@{/buscar/informacion}" method="get">
                                    <table class="table table-bordered">
                                        <tbody>
                                            <tr>
                                                <td>Marca:</td>
                                                <td>
                                                    <select name="marca">
                                                        <option value="">No Importa</option>
                                                        <option value="Toyota">Toyota</option>
                                                        <option value="Chevrolet">Chevrolet</option>
                                                        <option value="Hyundai">Hyundai</option>
                                                        <option value="Nissan">Nissan</option>
                                                        <option value="Mitsubishi">Mitsubishi</option>
                                                        <option value="BYD">BYD</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Modelo:</td>
                                                <td><input type="text" name="modelo" min="100" max="5000" step="100"/></td>
                                            </tr>
                                            <tr>
                                                <td>Estilo:</td>
                                                <td>
                                                    <select name="estilo">
                                                        <option value="">No Importa</option>
                                                        <option value="SUV">SUV</option>
                                                        <option value="Sedan">Sedan</option>
                                                        <option value="Coupe">Coupe</option>
                                                        <option value="Convertible">Convertible</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Combustible:</td>
                                                <td>
                                                    <select name="combustible">
                                                        <option value="">No Importa</option>
                                                        <option value="Gasolina">Gasolina</option>
                                                        <option value="Diesel">Diesel</option>
                                                        <option value="Eléctrico">Eléctrico</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Transmisión:</td>
                                                <td>
                                                    <select name="transmision">
                                                        <option value="">No Importa</option>
                                                        <option value="Manual">Manual</option>
                                                        <option value="Automática">Automática</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Provincia:</td>
                                                <td>
                                                    <select name="provincia">
                                                        <option value="">No Importa</option>
                                                        <option value="San José">San José</option>
                                                        <option value="Cartago">Cartago</option>
                                                        <option value="Heredia">Heredia</option>
                                                        <option value="Alajuela">Alajuela</option>
                                                        <option value="Guanacaste">Guanacaste</option>
                                                        <option value="Puntarenas">Puntarenas</option>
                                                        <option value="Limón">Limón</option>
                                                    </select>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Año:</td>
                                                <td>
                                                    <input type="text" name="ano" min="100" max="5000" step="100"/>
                                                </td>                                              
                                            </tr>
                                            <tr>
                                                <td>Rango de Precio:</td>

                                                <td><input type="number" name="precio" min="0" step="0.01" value="0.0" /></td>
                                                <!--td>Minimo 0 <input type="range" name="precio" min="0" max="30000000" step="1"/> 30000000 es el maximo</td-->

                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="text-center p-2">
                                        <button type="submit" class="btn btn-primary">Buscar</button>
                                    </div>
                                </form>
                                <div th:if="${autos != null}">
                                    <h2>Resultados de Búsqueda</h2>
                                    <ul>
                                        <li th:each="auto : ${autos}">
                                            <span th:text="${auto.marca}"></span> -
                                            <span th:text="${auto.modelo}"></span> -
                                            <span th:text="${auto.estilo}"></span> -
                                            <span th:text="${auto.combustible}"></span> -
                                            <span th:text="${auto.transmision}"></span> -
                                            <span th:text="${auto.provincia}"></span> -
                                            <span th:text="${auto.ano}"></span> -
                                            <span th:text="${auto.precio}"></span>
                                        </li>
                                    </ul>
                                </div>
                                <div th:if="${error != null}" class="alert alert-danger">
                                    <p th:text="${error}">Error</p>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3 Sección para crear los filtros -->
        <!--section th:fragment="filtros" class="bg-light" id="autos"-->
        <section th:fragment="filtros" class="bg-light d-flex justify-content-center align-items-center min-vh-100" id="autos">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <form method="POST" th:action="@{/buscar/query1}" class="was-validated">
                            <div class="card">                            
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="marca">[[#{auto.marca}]]</label>
                                        <select class="form-control" th:name="marca" required="true">
                                            <option value="">Seleccione una opción</option>
                                            <option value="Toyota" th:selected="${marca == 'Toyota'}">Toyota</option>
                                            <option value="Chevrolet" th:selected="${marca == 'Chevrolet'}">Chevrolet</option>
                                            <option value="Hyundai" th:selected="${marca == 'Hyundai'}">Hyundai</option>
                                            <option value="Nissan" th:selected="${marca == 'Nissan'}">Nissan</option>
                                            <option value="Mitsubishi" th:selected="${marca == 'Mitsubishi'}">Mitsubishi</option>
                                            <option value="BYD" th:selected="${marca == 'BYD'}">BYD</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="modelo">[[#{auto.modelo}]]</label>
                                        <input type="text" class="form-control" 
                                               th:value="${modelo}"
                                               th:name="modelo"/>
                                    </div>
                                    <div class="mb-3">
                                        <label for="estilo">[[#{auto.estilo}]]</label>
                                        <select class="form-control" th:name="estilo" required="true">
                                            <option value="">Seleccione una opción</option>
                                            <option value="SUV" th:selected="${estilo == 'SUV'}">SUV</option>
                                            <option value="Sedan" th:selected="${estilo == 'Sedan'}">Sedan</option>
                                            <option value="Coupe" th:selected="${estilo == 'Coupe'}">Coupe</option>
                                            <option value="Convertible" th:selected="${estilo == 'Convertible'}">Convertible</option>
                                            <option value="Hatchback" th:selected="${estilo == 'Hatchback'}">Hatchback</option>
                                            <option value="Pick UP 2WD" th:selected="${estilo == 'Pick UP 2WD'}">Pick UP 2WD</option>
                                            <option value="Pick UP 4WD" th:selected="${estilo == 'Pick UP 4WD'}">Pick UP 4WD</option>
                                        </select>                                    
                                    </div>
                                    <div class="mb-3">
                                        <label for="combustible">[[#{auto.combustible}]]</label>
                                        <select class="form-control" th:name="combustible" required="true">
                                            <option value="">Seleccione una opción</option>
                                            <option value="Gasolina" th:selected="${combustible == 'Gasolina'}">Gasolina</option>
                                            <option value="Diésel" th:selected="${combustible == 'Diésel'}">Diésel</option>
                                            <option value="Eléctrico" th:selected="${combustible == 'Eléctrico'}">Eléctrico</option>                                        
                                        </select> 
                                    </div>
                                    <div class="mb-3">
                                        <label for="transmision">[[#{auto.transmision}]]</label>
                                        <select class="form-control" th:name="transmision" required="true">
                                            <option value="">Seleccione una opción</option>
                                            <option value="Dual" th:selected="${transmision == 'Dual'}">Dual</option>
                                            <option value="Manual" th:selected="${transmision == 'Manual'}">Manual</option>
                                            <option value="Automática" th:selected="${transmision == 'Automática'}">Automática</option>                                        
                                        </select> 
                                    </div>
                                    <div class="mb-3">
                                        <label for="provincia">[[#{auto.provincia}]]</label>
                                        <select class="form-control" th:name="provincia" required="true">
                                            <option value="">Seleccione una opción</option>
                                            <option value="Alajuela" th:selected="${provincia == 'Alajuela'}">Alajuela</option>
                                            <option value="Cartago" th:selected="${provincia == 'Cartago'}">Cartago</option>
                                            <option value="Heredia" th:selected="${provincia == 'Heredia'}">Heredia</option>
                                            <option value="Guanacaste" th:selected="${provincia == 'Guanacaste'}">Guanacaste</option>
                                            <option value="Limón" th:selected="${provincia == 'Limón'}">Limón</option>
                                            <option value="Puntarenas" th:selected="${provincia == 'Puntarenas'}">Puntarenas</option>
                                            <option value="San José" th:selected="${provincia == 'San José'}">San José</option>
                                        </select>	
                                    </div>
                                    <div class="mb-3">
                                        <label for="ano">[[#{auto.ano}]]</label>
                                        <input type="number" class="form-control" 
                                               th:value="${ano}"
                                               th:name="ano"
                                               min="2000" max="2024" step="1" 
                                               required="true" />
                                    </div>
                                    <!--div class="mb-3">
                                        <label for="ano">[[#{auto.ano}]]</label>
                                        <input type="numeric" class="form-control" 
                                               th:value="${ano}"
                                               th:name="ano" required="true"/>
                                    </div-->
<div class="mb-3">
    <label for="precio">[[#{auto.precio}]]</label>
    <input type="range" class="form-control-range" 
           th:value="${precio}"
           th:name="precio" 
           id="precio"
           min="1000" max="500000" step="1000"
           oninput="document.getElementById('precioValue').textContent = this.value"
           required="true"/>
    <span id="precioValue" th:text="${precio}">1000</span> <!-- Valor por defecto -->
</div>


                                    <!--div class="mb-3">
                                        <label for="precio">[[#{auto.precio}]]</label>
                                        <input type="numeric" class="form-control" 
                                               th:value="${precio}"
                                               th:name="precio" required="true"/>
                                    </div-->
                                </div>
                                <div class="card-footer text-center">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-check"></i> [[#{auto.buscar}]]
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2 Sección principal para mostrar la informaccion de la entidad auto -->
        <section th:fragment="listadoCar" id="auto">        
            <div class="row row-cols-4">
                <div class="card" th:each="a : ${autos}">
                    <figure><img th:src="${a.rutaImagen}" 
                                 class="card-img-top" alt="..."
                                 height="200"/>
                    </figure>
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Marca: ' + ${a.marca}"></h5>
                    </div>              
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Estilo: ' + ${a.estilo}"></h5>
                    </div>            
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Combustible: ' + ${a.combustible}"></h5>
                    </div> 
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Transmisión: ' + ${a.transmision}"></h5>
                    </div>                     
                    <div class="card-header">
                        <h5  class="card-title" th:text="'Provincia: ' + ${a.provincia}"></h5>
                    </div>
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Año: ' + ${a.ano}"></h5>
                    </div>                     
                    <div class="card-header">
                        <h5 class="card-title" th:text="'Precio: ' + ${a.precio}"></h5>
                    </div>                     
                </div>
            </div>
        </section>

    </body>
</html>